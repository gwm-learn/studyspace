# 1.shell变量
## 变量的设置与使用

设置：
变量名=变量内容

变量设置规则：

1. 变量名与变量内容以等号=连接
2. 变量名只能由字母或数字组成，且不能以数字为开头
3. 双引号内的特殊字符保留原来的特性
```
var="lang is $LANG"
echo $var
lang is zh_CN.UTF-8
```
4. 单引号内的特殊字符为一般字符(纯文本)
```
var='lang is $LANG'
echo $var
lang is $LANG 
```

5. 读取键盘输入
```
read [-pt] variable
-p:后面接提示字符
-t:后面接等待的秒数
```

6. 声明变量类型
```
declare [-aixr] variable
-a:变量定义为数组类型
-i:变量定义为整数类型
-x:将变量变成环境变量
-r:将变量设为只读，不能更改，不能unset
```

7. 特殊变量
```
$0 	当前脚本的文件名
$n 	传递给脚本或函数的参数。n 是一个数字，表示第几个参数。例如，第一个参数是$1，第二个参数是$2。
$# 	传递给脚本或函数的参数个数。
$* 	传递给脚本或函数的所有参数。
$@ 	传递给脚本或函数的所有参数。将所有参数分开
$? 	上个命令的退出状态，或函数的返回值。
$$ 	当前Shell进程ID。
```

8. 变量替换
```
${var} 	变量本来的值
${var:-word} 	如果变量 var 为空或已被删除(unset)，那么返回 word，但不改变 var 的值。
${var:=word} 	如果变量 var 为空或已被删除(unset)，那么返回 word，并将 var 的值设置为 word。
${var:?message} 	如果变量 var 为空或已被删除(unset)，那么将消息 message 送到标准错误输出，可以用来检测变量 var 是否可以被正常赋值。
若此替换出现在Shell脚本中，那么脚本将停止运行。
${var:+word} 	如果变量 var 被定义，那么返回 word，但不改变 var 的值。
```

## 注意
1. 可用转义符\将特殊符号变为一般字符
2. 在一串命令的执行中，还需要借由其他额外的命令所提供的命令所提供的信息时，使用反单引号`或者$()包含命令
```
version=$(uname -r)
echo $version
3.1.1
```
3. 取消变量
```
unset 变量名
```

## 其他
1. 观察环境变量的命令
```
env
```

2. 观察所有变量的命令
```
set
```

3. 提示字符的设置的变量
```
PS1
```

4. 自定义变量转换为环境变量
```
export
```

# 2.数据流重定向
## 输出重定向
```
1>  以覆盖方式将正确的数据[stdout]输出到指定的文件[默认 > ]
1>> 以累加方式将正确的数据[stdout]输出到指定的文件[默认 >> ]
2>  以覆盖方式将错误的数据[stderr]输出到指定的文件
2>> 以累加方式将错误的数据[stderr]输出到指定的文件
```
* 将stdout和stderr输出到不同的文件
```
ls ./  > file01 2> file02
```
* 忽略错误信息
```
ls ./ 2> /dev/null
```
* stdout和stderr输出到同一个文件
```
ls ./ > file 2&>1
ls ./ &> file
```

## 命令执行的判断
```
command1; command2; command3       无论前面的命令执行是否成功，后面都要执行
command1 && command2 && command3   只有前面的命令执行成功，后面的命令才执行
command1 || command2 || command3   只要前面的命令执行失败，后面的命令才执行
```

## 管道 |
* 选取命令
```
cut -d '分隔符' -f num
cut -c num-
-d:后面接分隔符
-f:指以分隔符为界限的第几段
-c:输出数据每一行的第几个字符及以后的字符

grep [-acinv] [--color=auto] '查找字符' filename
-a:查找二进制文件以文本形式查找
-c:计算找到'查找字符'的个数
-i:忽略大小写
-n:输出行号
-v:显示没有'查找字符'的数据
```

* 排序命令
```
sort [-fbru] file/stdin
-f:忽略大小写
-b:忽略最前面的空格字符
-r:反向排序
-u:相同的数据只显示一行
```

* 计数
```
wc [-lwm]
-l:仅列出行
-w:仅列出多少字(英文字母)
-m:多少字符
```

## 双向重定向
```
tee [-a] file
-a:以累加方式将数据加入file
```

## 字符转换
```
tr [-ds] ...
-d:删除后面跟的字符
-s:替换重复的字符

col [-xb]
-x:将tab键以空格显示
```
